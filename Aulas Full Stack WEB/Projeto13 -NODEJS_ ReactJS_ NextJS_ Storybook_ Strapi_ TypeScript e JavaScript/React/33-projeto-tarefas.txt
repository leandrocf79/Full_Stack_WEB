Projeto Tarefas é para mostrar cadastro, login, logout de usuário. 
Também existe a parte Realtime com Banco de Dados para a exibição das tarefas agendadas.
Diferentes usuários podem se cadastrar e cada um terá sua área pessoal.



-------------------------------Resumo de instalações iniciais:
npx create-react-app tarefas
cd tarefas
npm install firebase			*Iniciar firebase DB no projeto
npm install react-router-dom        	*Para fazer a navegação de páginas


-----
No https://console.firebase.google.com/
Ir para o console / Adicionar projeto / Tarefas
salvar

Clicar em web com icone assim:  </>
Registrar app
TarefasApp

** Neste momento não será utilizado host

-----

No terminal do projeto instalar:

cd tarefas
npm install firebase

Copiar os dados do BD ou

Clique em continuar no console. Essas informações acima ficarão salvas.

https://console.firebase.google.com/project/curso-ccd14/overview?hl=pt
_________________________________________

*******Dados INVÁLIDOS********* É apenas demonstrativo!! Vá ao DB e copie os dados corretos

const firebaseConfig = {
  apiKey: "AIzaSyBetUNEViuR9l2wzErg",
  authDomain: "curso-ccd14.firebaseapp.com",
  projectId: "curso-ccd14",
  storageBucket: "curso-ccd14.appspot.com",
  messagingSenderId: "786603685854",
  appId: "1:78660554:web:70e2e8c2c6a98f4f",
  measurementId: "G-LG2GR7K1"
};


_________________________________________



-----------------------------------------Terminar configurações no Firebase
O BD a ser utilizado aqui será o "Cloud Firestore"

Vá em (Criação/ Firestore Data base ) Cloud Firestore e selecione a opção Criar BD e "Iniciar no modo de teste" por enquanto.

Escolha o BD localizado em "southamerica-east1 (São Paulo)"

Clique em regras e estenda o tempo de utilização deste teste para ser utilizado alguns anos para frente

request.time < timestamp.date(2028, 3, 9);


---------------------------------------------

Integrar os dados do DB no projeto:

No VSCode em src/farebaseConnection.js colar o conteúdo correto do site.

import {initializeApp} from 'firebase/app';
import {getFirestore} from 'firebase/firestore'; // Foi o BD escolhido

import { getAuth } from 'firebase/auth'; // Para cadastrar e login de usuários. Faz autenticação


const firebaseConfig = {
  apiKey: "AIzaSyBetUNEViuR9l2wzErg",
  authDomain: "curso-ccd14.firebaseapp.com",
  projectId: "curso-ccd14",
  storageBucket: "curso-ccd14.appspot.com",
  messagingSenderId: "786603685854",
  appId: "1:78660554:web:70e2e8c2c6a98f4f",
  measurementId: "G-LG2GR7K1"
};

  const firebaseApp = initializeApp(firebaseConfig);

  const db = getFirestore(firebaseApp);
  const auth = getAuth(firebaseApp);

  export { db, auth }; // Não foi default, quando for importar será entre chaves {}




------------------Dar um reset em src/index.css:

*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Iniciar estilos globais*/
body{
    background-color: #15171a;
    color: #FFF;
    width: 100%;
    font-family: sans-serif, 'Segoe UI', Tahoma, Geneva, Verdana;
}

/*Ativar cursos da "mãozinha" em todos os botões */
button{
    cursor: pointer;
}




--------------------Em src/index.js:

import  React from 'react';
import  ReactDOM  from 'react';
import  App from './App';
import './index.css';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
    <React.StrictMode>

        <App/>

    </React.StrictMode>
);




----------------------Em src/ App.js:

export default function App() {
  return (
    <div className="container">
      <h1>teste App.js</h1>

    </div>
  );
}



--------------------Em src/pages/Home/index.js:

export default function Home() {
  return (
    <div className="App">
      <h1>teste Home.js</h1>

    </div>
  );
}



----------------------Criar rotas.

Em src/routes/index.js:


import { Routes, Route} from 'react-router-dom';
import Home from '../pages/Home';

function RoutesApp(){
    return(
        <Routes>
            <Route path='/' element={<Home/>} />
        </Routes>
    )
}

export default RoutesApp;




----------------App.js não será mais usado manualmente, atualizar para:


import { BrowserRouter } from "react-router-dom";
import RoutesApp from "./routes";

export default function App() {
  return (
    <BrowserRouter>
      <RoutesApp/>    
    </BrowserRouter>
  )
}




--------------------Em src/pages/Register/index.js:

export default function Register() {
  return (
    <div className="App">
      <h1>teste Register</h1>

    </div>
  );
}




--------Atualizar routes/index.js:

import { Routes, Route} from 'react-router-dom';
import Home from '../pages/Home';
import Register from '../pages/Register';

function RoutesApp(){
    return(
        <Routes>
            <Route path='/' element={<Home/>} />
            <Route path='/register' element={<Register/>} />

        </Routes>
    )
}

export default RoutesApp;


//Teste no navegador: http://localhost:3000/register



-----------Desenvolver src/pages/Home/index.js:


import { useState } from "react";
import './home.css';
import { Link } from 'react-router-dom'; // Com "L" maiúsculo

import { auth } from '../../firebaseConnection';
import { signInWithEmailAndPassword } from 'firebase/auth';
import { useNavigate } from 'react-router-dom'; //para fazer navegação de forma indireta


export default function Home() {

  const [email, setEmail] = useState('');
  const [password, setSenha] = useState('');

  const navigate = useNavigate();// navigate para "navegar" usuário



  // Manipupar login
  async function handleLogin(e){  // Não vai deixar atualizar a página após fazer login
    e.preventDefault();
    //alert("Teste handleLogin")

    if (email !== '' && password !== ""){
      await signInWithEmailAndPassword(auth, email, password)

      //Se der certo login pode ir para /admin
      .then(()=>{

        navigate('/admin', { replace: true })

      })
      //Se não existe usuário
      .catch(()=>{
        console.log("Erro ao fazer login.");

      })

    }else{
      alert("Preencha todos os campos!")
    }
    
  }


    return (
      <div className="home-container">
        
        <h1>Lista de tarefas</h1>
        <span>Gerencie sua agenda</span>

        <form className="form" onSubmit={ handleLogin }>

          <input type="text" placeholder="Digite seu e-mail" value={email}
          onChange={(e)=> setEmail(e.target.value)}/>

          <input type="password" placeholder="**********" value={password}
          onChange={(e)=> setSenha(e.target.value)}/>

          <button type="submit">Acessar</button>

          <Link to="/register">Não possui uma conta? Cadastre-se.</Link>

        </form>
  
      </div>
    );
  }
  



-----------Desenvolver src/pages/Home/home.css:

.home-container{
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    justify-content: center;
    width: 100%;
}

.home-container h1{
    font-size: 24;
    margin-bottom: 10px;
}

.home-container span{
    margin-bottom: 30px;
}


/* Aqui teve uma coisa interessante sobre a largura responsiva*/
.form{
    display: flex;
    flex-direction: column;
    width: 90%;
    max-width: 300px;
}

.form input{
    border: 0;
    margin-bottom: 15px;
    height: 35px;
    border-radius: 5px;
    padding: 0 8px;    
}

.form button{
    height: 35px;
    border-radius: 5px;
    padding: 0 8px;  
    background-color: #5b81f3;
    color: #fff;
    font-size: 15px;
    max-width: 50%;
    margin-left: 25%;
}

.form button:hover{
    background-color: #e2e9bbf5;
    color: #083bd4; 
    transform: scale(1.1);
    transition: all 0.5s;
    font-size:20px;
}

.form textarea{
    margin-bottom: 12px;
    border: 0;
    height: 90px;
    resize: none;
    padding: 8px;
}


/* Para "Link" utilizar "a" */
.form a{
    color: #fff;
    text-decoration: none;
    margin: 15px 0;
    font-size: 15px;
    max-width: 55%;
    margin-left: 25%;
}





-----------Desenvolver src/pages/Register/index.js:

É muito parecido com a Home, pode copiar e colar para fazer as alterações.
home.cc já foi importada, pode tirar do Register.


----- Área de criar o cadastro, usar (( createUserWithEmailAndPassword ))

import { useState } from "react";
//import './home.css'; Apagar. CSS já está sendo chamado em Home
import { Link } from 'react-router-dom'; // Com "L" maiúsculo

import {auth} from '../../firebaseConnection';

// Aqui no Register é createUserwithEmailAndPassword 
import { createUserWithEmailAndPassword } from 'firebase/auth';

import { useNavigate } from 'react-router-dom'; //para fazer navegação de forma indireta


export default function Register() {

  const [email, setEmail] = useState('');
  const [password, setSenha] = useState('');

  const navigate = useNavigate();// navigate para "navegar" usuário


  // Manipupar login
  async function handleRegister(e){ // Não vai deixar atualizar a página após fazer login
    e.preventDefault();
    //alert("Teste handleLogin")

    if(email !== '' && password !== ''){
      await createUserWithEmailAndPassword(auth, email, password)

      //Se der certo login pode ir para /admin
      .then(() => {

        navigate('/admin', { replace: true })

      })
      //Se não existe usuário
      .catch(() => {
        console.log("ERRO AO FAZER O CADASTRO")
      })

    }else{
      alert("Preencha todos os campos!")
    }

  }



    return (
      <div className="home-container">
        <h1>Cadastre-se</h1>
        <span>Criar sua conta na Agenda Online</span>

        <form className="form" onSubmit={  handleRegister  }>

          <input type="text" placeholder="Digite seu e-mail" value={email}
          onChange={(e)=> setEmail(e.target.value)}/>

          <input type="password" placeholder="**********" value={password}
          onChange={(e)=> setSenha(e.target.value)}/>

          <button type="submit" >Cadastrar</button>

          <Link to="/">Já possui uma conta? Faça login.</Link>

        </form>
  
      </div>
    );
  }
  





----------------------Atualizar rotas em routes/index.js:

import { Routes, Route} from 'react-router-dom';
import Home from '../pages/Home';
import Register from '../pages/Register';
import Admin from '../pages/Admin';

function RoutesApp(){
    return(
        <Routes>
            <Route path='/' element={<Home/>} />
            <Route path='/register' element={<Register/>} />

            <Route path='/admin' element={<Admin/>} />

        </Routes>
    )
}

export default RoutesApp;



------------------------Criar src/pages/Admin/index.js:


import './admin.css';
export default function Admin(){
    return(
        <div>
            <h1>Teste página admin</h1>
        </div>
    )
}



--------------------------------
Fazer um cadastro no projeto para verificar se está tudo em ordem no DB. Se o usuário está mesmo sendo criado.

https://console.firebase.google.com/project/tarefas-802fe/authentication/users
--------------------------------


**********
Restringir Admin/index.js para que somente pessoas logadas possam acessar.





*************Recurso importante paraproteção.


----------Criar src/routes/Private.js:

export default function Private({children}){
    return children; // Indica que pode seguir. childrem


}



----------------------Atualizar rotas em routes/index.js:

import { Routes, Route} from 'react-router-dom';
import Home from '../pages/Home';
import Register from '../pages/Register';
import Admin from '../pages/Admin';

import Private from './Private';    // Para proteger <Admin/>, só quem estiver logado terá acesso.

function RoutesApp(){
    return(
        <Routes>
            <Route path='/' element={<Home/>} />
            <Route path='/register' element={<Register/>} />
            
            <Route path='/admin' element={ <Private>  <Admin/>  </Private>} />

        </Routes>
    )
}

export default RoutesApp;




----------Atualizar src/routes/Private.js:

import { useState, useEffect } from 'react';

import { auth } from '../firebaseConnection'; // Para fazer a conexão com autenticação
import { onAuthStateChanged } from 'firebase/auth'; // Vericar se tem usuário logado 
import { async } from '@firebase/util';

import { Navigate } from 'react-router-dom';

export default function Private({children}){
    //console.log('Teste de login');

    const [loading, setLoading] = useState(true);

    //verificar se está logado:
    const [signed, setSigned] = useState(false); //Não inicia logado
    
    useEffect(()=>{
        async function checkLogin(){
            const unsub = onAuthStateChanged(auth, (user)=>{
                
                //verificar se tem user logado:
                if(user){
                    //Se tiver logado manter em localStorage
                    const userData = {
                        uid: user.uid,
                        email: user.email,
                    }
                    // passar localStorage para string com JSON para poder salvar
                    localStorage.setItem("@detailUser", JSON.stringify(userData));
                    setLoading(false);
                    setSigned(true); // Agora usuário está logado

                }else{
                    // não possui user logado
                    setLoading(false);
                    setSigned(false);
                }

            })

        }
        checkLogin();

     }, [])

     //Se tiver carregado informações de usuário deixar em branco mesmo
     if(loading){
        return(
            <div></div>
        )
     }
     //Se NÃO estiver logado vai para home
     if(  !signed  ){
        return <Navigate to="/" />
     }


    return children; // após passar por todas as verificações pode seguir. childrem

}


--------------------------

Abra em uma aba ANÔNIMA e faça o teste

http://localhost:3000/admin

Vai permanecer na home por não estar logado.



---------------------------------------------

----------------Atualizar Admin/index.js:


import { useState } from 'react'; //Para armazenar o que o usuário digitar

import './admin.css';

//Botão sair. Importar firebase
import { auth } from '../../firebaseConnection';
//Para fazer logout
import { signOut } from 'firebase/auth';


export default function Admin(){
    const [tarefaInput, setTarefaInput] = useState('')

    async function handleRegister(e){
        e.preventDefaul();
        alert("teste botao registrar tarefa")
    }


    //Botão sair. Importar firebase. Terá logout e vai para pg inicial como configurado em Private.js
async function handleLogout(){
    await signOut(auth);
} 

    return(
        <div className='admin-container'>
            <h1>Minhas tarefas</h1>
            <form className='form' onSubmit={handleRegister}>
                <textarea placeholder='Digite sua tarefa' value={tarefaInput} onChange={(e)=> setTarefaInput(e.target.value)} />

                <button className='btn-register' type='submit'>Registrar</button>
            </form>

            <article className='list'>
                <p> tarefas</p>
                <div>
                    <button>Editar</button>
                    <button className='btn-delete'>Excluir</button>

                </div>
            </article>

            <button className='btn-logout' onClick={handleLogout}>Sair</button>


        </div>
    )
}



----------------Criar admin.css:

.admin-container{
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 45px;
}

.admin-container{
    margin-bottom: 30px;
}

.btn-register{
    margin-bottom: 30px;    
}

.list{
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    background-color: rgb(18, 17, 16);
    border-radius: 5px;
    margin-bottom: 12px;
    justify-content: center;
    padding: 10px 10px;
}

.list p{
    margin-bottom: 8px;
}

.list button{
    margin-right: 20px;
    border-color: rgb(47, 45, 43);
    border-radius: 5px;
    padding: 5px;
    background-color: rgb(18, 17, 16);
    color: #FFF;
}

.list button:hover{
    border-color: rgba(175, 217, 39, 0.426);
    color:  rgba(175, 217, 39, 0.426);
}

/* Selecionar 2º elemento */
.list button:hover:nth-child( 2 ){
    border-color: rgb(217, 39, 39);
    color: red;
}


.btn-logout{
    position: absolute;
    bottom: 6%;
    left: 4%;
    height: 60px;
    width: 60px;
    border-radius: 30px;
    border: 0;
    background-color: rgba(70, 205, 205, 0.225);
    font-weight: bold;
}

.btn-logout:hover{
    background-color: rgba(70, 205, 205, 0.815);
    color: #FFF;
    transition: all 0.5s;
}



------------------------------------


























