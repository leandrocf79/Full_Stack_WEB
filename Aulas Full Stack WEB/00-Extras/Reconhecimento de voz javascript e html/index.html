<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reconhecimento de voz</title>
</head>
<body>
  <h5>Dite seu texto se estiver usando navegador Google Chrome.</h5>
    <!--<button onclick="startDictation()">Start Dictation</button>-->

      <button onclick="startDictation()">Start Dictation</button>
    <div id="language-box" style="display: none;">
      <button onclick="selectLanguage('pt-br')">Português</button>
      <button onclick="selectLanguage('en-US')">Inglês</button>
    </div>

    <p id="transcription"></p> <!--Aqui será exibido para o usuário o texto ditado-->
    

    <script>
      function startDictation() {
        if (window.hasOwnProperty('webkitSpeechRecognition')) {
          var recognition = new webkitSpeechRecognition();
          recognition.continuous = false;
          recognition.interimResults = false;

//Verificar idioma do navegador automaticamente
          var lang = navigator.language || navigator.userLanguage;
//var lang = prompt("In which language you want to speak? (pt-br or en-US)");


          if (lang.indexOf("pt") === 0) {
            recognition.lang = "pt-br";
          } else if (lang.indexOf("en") === 0) {
            recognition.lang = "en-US";
          } else if{
            recognition.lang = "es-es";
          } else {
          recognition.lang = "pt-br";
          }


          recognition.start();
          recognition.onresult = function(e) {
            document.getElementById('transcription').textContent = e.results[0][0].transcript;
            recognition.stop();
          };
          recognition.onerror = function(e) {
            recognition.stop();
          }
        }
      }
    </script>
  </body>
</html>
  </body>
</html>

</body>
</html>